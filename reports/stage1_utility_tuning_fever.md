# Stage1 Utility Tuning (fever)

Config

- in_path: `/mnt/c/Users/nguye/Downloads/My projject/the-rag-auditor/data/calibration/fever_stage1_dev_train.parquet`
- n_raw: `5715`
- n_used: `200`
- seed: `14`
- logit_col: `logit_platt`
- y_col: `y`
- tau_source: `config`
- tau_grid_min: `0.2`
- tau_grid_max: `2.0`
- tau_grid_steps: `50`
- max_fp_accept_rate: `0.05`
- max_fn_reject_rate: `0.05`
- lambda_fp: `10.0`
- lambda_fn: `10.0`
- lambda_unc: `1.0`

Baseline thresholds

- tau: `0.9957177012600404`
- t_lower: `0.0721672686678491`
- t_upper: `1.0`

| metric | value |
|---|---|
| accept_rate | 0.0000 |
| reject_rate | 0.1200 |
| uncertain_rate | 0.8800 |
| fp_accept_rate | 0.0000 |
| fn_reject_rate | 0.0050 |
| ok_rate | 0.9950 |
| coverage | 0.1200 |
| accuracy_on_decided | 0.9583 |

- feasible_configs: `247`

Top configs by utility

| tau | t_lower | t_upper | accept_rate | reject_rate | uncertain_rate | fp_accept_rate | fn_reject_rate | ok_rate | coverage | accuracy_on_decided | utility | label |
|---|---|---|---|---|---|---|---|---|---|---|---|---|
| 0.9957 | 0.1616 | 0.2120 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.2322 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.2524 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.2727 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.2929 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.3131 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.3333 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.3535 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.3737 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.3939 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.4141 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.4343 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.4545 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.4747 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.4949 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.5151 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.5353 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.5555 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.5757 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |
| 0.9957 | 0.1616 | 0.5959 | 0.0000 | 0.9250 | 0.0750 | 0.0000 | 0.0700 | 0.9300 | 0.9250 | 0.9243 | 0.1500 | grid |

Pareto summary

| tau | t_lower | t_upper | fp_accept_rate | fn_reject_rate | uncertain_rate | ok_rate | utility |
|---|---|---|---|---|---|---|---|
| 0.9957 | 0.1010 | 0.2120 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.2322 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.2524 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.2727 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.2929 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.3131 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.3333 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.3535 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.3737 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.3939 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.4141 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.4343 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.4545 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.4747 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.4949 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.5151 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.5353 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.5555 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.5757 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |
| 0.9957 | 0.1010 | 0.5959 | 0.0000 | 0.0250 | 0.5600 | 0.9750 | -0.3700 |

Selected config

- tau: `0.9957177012600404`
- t_lower: `0.1010204081632653`
- t_upper: `0.2120408163265306`
- utility: `-0.3700000000000001`
- feasible: `True`

Repro command

```
scripts/stage1_utility_tune.py --track fever --in_path /mnt/c/Users/nguye/Downloads/My projject/the-rag-auditor/data/calibration/fever_stage1_dev_train.parquet --logit_col logit_platt --y_col y --n 200 --out_md reports/stage1_utility_tuning_fever.md --out_yaml configs/thresholds_stage1_product_fever.yaml
```
